
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
  <script>
    // JSON : JavaScript Object Notation
    // ë°ì´í„°ë¥¼ ë¬¸ìžì—´ì˜ í˜•íƒœë¡œ ì£¼ê³  ë°›ë„ë¡ ë§Œë“¤ì–´ì§„ ë‚´ìž¥ ê°ì²´

    // const student = {
    //   name: 'it',
    //   age: 30,
    //   courses: ['linux', 'html/css', 'js']
    // }

    // console.log(student);

    // // 1. í”„ë¡ íŠ¸ -> ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ
    // // ? : ë¬¸ìžì—´ë¡œ ì „ì†¡í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ì ìœ¼ë¡œë„ íš¨ìœ¨ì 
    // // 2. ì„œë²„ -> í”„ë¡ íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë–„
    // // stringify() : js ê°ì²´ë¥¼ ë¬¸ìžì—´ë¡œ ë³€ê²½
    // let jsonStudent = JSON.stringify(student);
    // console.log(jsonStudent);

    // // 1. í”„ë¡ íŠ¸ / ì„œë²„ê°€ ë°›ì€ ë°ì´í„°ë¥¼ ìžì‹ ì˜ ê°ì²´ë¡œ ë°”ê¾¸ì–´ì„œ ì‚¬ìš©í•  ë–„
    // // parse : ë¬¸ìžì—´ì„ js ê°ì²´ë¡œ ë³€ê²½
    // let newStudent = JSON.parse(jsonStudent);
    // console.log(newStudent);

    // // jsonì„ ì‚¬ìš©í•  ë•Œ keyë„ ë¬¸ìžì—´ë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤.
    // // *** ðŸ˜€jsonì„ ì‚¬ìš©í• ë•Œì—ëŠ” ë°˜ë“œì‹œ ""ì‚¬ìš©í•´ì•¼í•¨!!!
    // let obj1 = { key1: 'v1' };
    // let obj2 = "{'key2': 'v2'}";
    // let obj3 = '{"key3": "v3"}';

    // console.log(obj1.key1);
    // console.log(JSON.parse(obj3).key3);

    // // XMLHttpsRequest
    // function ajaxTest() {
    //   var xhr = new XMLHttpRequest();

    //   // onreadystatechange
    //   // clientì™€ serverê°„ì— í†µì‹ ì„ í•  ë•Œ
    //   // ì¤‘ê°„ ë‹¨ê³„ì— ëŒ€í•œ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ ìžë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë¡œì§

    //   // readystate ìˆ«ìžë¡œ í‘œí˜„
    //   // 1 : ìš”ì²­ ì‹œìž‘
    //   // 2 : ìš”ì²­ ì¤‘
    //   // 3 : ì‘ë‹µ ì¤‘
    //   // 4 : ì‘ë‹µ ì™„ë£Œ

    //   // status 200 : ì •ìƒ ì‘ë‹µ
    //   xhr.onreadystatechange = function () {
    //     // alert(this.readyState)
    //     if (this.readyState == 4 && this.status == 200) {
    //       console.log((JSON.parse(this.responseText)[3]).phone)
    //     }
    //   }
    //   // ì‹¤ì œ ìš”ì²­(ë°©ì‹, ìš”ì²­ì£¼ì†Œ, ë¹„ë™ê¸°ìš”ì²­(true))
    //   xhr.open("GET", "https://jsonplaceholder.typicode.com/users", true)
    //   xhr.send();
    // }

    // ajaxTest();


    // fetch
    // fetch("https://jsonplaceholder.typicode.com/users")
    //   .then((response) => { return response.json() })
    //   .then((users) => { console.log(users) })

    // fetch ì‹¤ì œ ì‚¬ìš©
    // .ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì„ ë©”ì„œë“œ ì²´ì´ë‹ ì´ë¼ê³  í•¨
    fetch('https://jsonplaceholder.typicode.com/posts/1')
      .then(response => response.json())
      .then(post => post.userId)
      .then(userId => "https://jsonplaceholder.typicode.com/users/" + userId)
      .then(url => fetch(url))
      .then(response => response.json())
      .then(user => console.log(user))
      .catch((err) => {})

    // ë©”ì†Œë“œì˜ ì¢…ë¥˜ì™€ í™œìš© ë°©ë²•
    // 1. GET : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— íŠ¹ì • ë°ì´í„°ë¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ
    // fetchì˜ ê¸°ë³¸ ìš”ì²­ë°©ì‹ì€ GET, ë”°ë¼ì„œ ë”°ë¡œ ì§€ì •í•  í•„ìš”ê°€ ì—†ìŒ

    // 2. POST : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— íŠ¹ì • ë°ì´í„°ë¥¼ ìƒì„±í•  ë–„ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ
    // fetch("https://jsonplaceholder.typicode.com/posts/1", {
    //   method: "DELETE",
    // })
    // .then((response) => response.json())
    // .then((data) => console.log(data))

    // 3. PUT : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— íŠ¹ì • ë°ì´í„°ì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ

    // 4. DELETE : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— íŠ¹ì • ë°ì´í„°ë¥¼ ì‚­ì œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ


    // axios : ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ í”„ë¡œë¯¸ìŠ¤ ê¸°ë°˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
    // ë¼ì´ë¸ŒëŸ¬ë¦¬ vs í”„ë ˆìž„ì›Œí¬
    axios.get("https://jsonplaceholder.typicode.com/users")
      .then((response) => response.data)
      .then((data) => data[3])
      .then((patricia) => console.log(patricia))
      .catch((err) => console.log(err))

    // fetch : pst, put, delete --> axios : post, put, delete
    // axios.post("https://jsonplaceholder.typicode.com/posts", {
    //   userId: 1,
    //   title: "post testing",
    //   body: "post testing!"
    // }).then(response => console.log(response))


    const bret = {
      "id": 1,
      "name": "Leanne Graham",
      "username": "Bret",
      "email": "Sincere@april.biz",
      "address": {
        "street": "Kulas Light",
        "suite": "Apt. 556",
        "city": "Gwenborough",
        "zipcode": "92998-3874",
        "geo": {
          "lat": "-37.3159",
          "lng": "81.1496"
        }
      },
      "phone": "1-770-736-8031 x56442",
      "website": "hildegard.org",
      "company": {
        "name": "Romaguera-Crona",
        "catchPhrase": "Multi-layered client-server neural-net",
        "bs": "harness real-time e-markets"
      }
    }

    // ê°ì²´ ë¹„êµ¬ì¡°í™” í• ë‹¹
    // const obj = {
    //   a: 1,
    //   b: 2,
    //   name: "it"
    // }
    // console.log(obj.b);
    // let {a, b, name, c=0} = obj;
    // console.log(b)
    // console.log(name)
    // console.log(c)


    // name = "it2"
    // console.log(obj.name)

    // lat, lng ??
    // const {lat, lng} = bret.address.geo;
    // console.log(lat)
    // console.log(lng)

    // ë°°ì—´ ë¹„êµ¬ì¡°í™” í• ë‹¹
    const arr = [1, 2];
    const [one, two] = arr;

    console.log(one);
    console.log(two);

    const objArr = {
      info: {
        private: {
          name: 'js',
          age: 24,
          hobbies: ['programming, algorithm'],
        }
      },
      purpose: 'destructure test'
    }

    const { name, age, hobbies } = objArr.info.private;
    console.log(name);

    const newObj = {
      name,
      age,
      hobbies,
    }

    console.log(newObj);

    // rest(...)
    const avengers = ['í† ë¥´', 'ìŠ¤íŒŒì´ë”ë§¨', 'ë‹¥í„°ìŠ¤íŠ¸ë ˆì¸ì§€'];
    const totalAvengers = [...avengers, 'ë¯¸ìŠ¤ì œì¸'];

    console.log(avengers);
    console.log(totalAvengers);

    //ê°ì²´
    const planet = {
      continent: 'Asia'
    };

    const country = {
      ...planet,
      countryName: 'ROK'
    }

    const city = {
      // continent: 'Asia',
      // countryName: 'ROK',
      ...country,
      region: 'Busan'
    }

    console.log(planet);
    console.log(country);
    console.log(city);
    // í•¨ìˆ˜

    // function sum(x, y) {
    //   return x + y + z;
    // }

    function sum(...rest) {
      // console.log(rest);
      return rest.reduce((accumulator, currentValue) => (accumulator + currentValue), 0);
    }
    sum(1, 2, 3);
    console.log(sum(1, 2, 3, 5, 24, 5, 1, 56, 657))


    console.log('--async - await--')
    async function asyncTest() {
      return 'test';
    }

    asyncTest()
        .then(data => data)

    // asyncì˜ ë¦¬í„´ê°’ì€ í•­ìƒ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì´ë‹¤!     
    // í”„ë¡œë¯¸ìŠ¤ ê°ì²´ê°€ ë¦¬í„´ëœë‹¤ëŠ” ì˜ë¯¸ëŠ”
    // ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼ê°€ ì™„ë²½í•˜ê²Œ ìˆ˜í–‰ ë˜ì–´ì•¼
    // ìš°ë¦¬ê°€ ìž‘ì—…í•˜ëŠ” ë¡œì§ì—ì„œ ì›í•˜ëŠ” ëŒ€ë¡œ  ê²°ê³¼ê°€ 
    // ì¶œë ¥ ë  ìˆ˜ ìžˆì„ê²ƒ!
  

    // await : í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì˜ ìˆ˜í–‰ ìƒíƒœê°€ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°ë¥¼ í•˜ë‹¤ê°€ 
    // ì™„ë²½í•˜ê²Œ ìˆ˜í–‰ë˜ê³  ë‚œ ë’¤ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” í‚¤ì›Œë“œ  

    async function awaitTest() {
      // fetch('https://jsonplaceholder.typicode.com/posts/1');

      const result1 = await new Promise((resolve) => setTimeout(() => resolve('test1'),3000));
      const result2 = await new Promise((resolve) => setTimeout(() => resolve('test2'),1000));

      console.log(result1);
      console.log(result2);
    }

    awaitTest();

    async function a() {
      await fetch('https://jsonplaceholder.typicode.com/posts/1');
    }

  </script>
</body>

</html>
